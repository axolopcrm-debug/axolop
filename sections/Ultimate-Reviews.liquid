{% schema %}
{
  "name": "Ulitmate Reviews",
  "settings": [
    {
      "type": "text",
      "id": "heading_text",
      "label": "Heading",
      "default": "Heading" 
    },
    {
      "type": "color",
      "id": "border_color",
      "label": "Border Color",
      "default": "#fe2d52"
    },
        {
      "type": "color",
      "id": "star_color",
      "label": "Star Background Color",
      "default": "#fe2d52"
    },
    {
      "type": "color",
      "id": "profile_color",
      "label": "Profile Background Color",
      "default": "#fe2d52"
    },
            {
      "type": "color",
      "id": "scale_color",
      "label": "Scale Background Color",
      "default": "#eeeeee"
    },
    {
      "type": "range",
      "id": "border_radius",
      "label": "Border Radius",
      "min": 0,
      "max": 20,
      "step": 1,
      "default": 10,
      "unit": "px"
    },
            {
          "type": "text",
          "id": "textv1",
          "label": "Text for scale 1",
          "default": "Quality"
        },
        {
          "type": "text",
          "id": "textv2",
          "label": "Text for scale 2",
          "default": "Ease of Use"
        },
        {
          "type": "text",
          "id": "textv3",
          "label": "Text for scale 3",
          "default": "Value"
        },
        {
          "type": "text",
          "id": "textv4",
          "label": "Text for scale 4",
          "default": "Service"
        },
        {
      "type": "checkbox",
      "id": "show_more_enabled",
      "label": "Enable Show More Button",
      "default": true
    }
  ],
  "blocks": [
    {
      "type": "Review",
      "name": "Review",
      "settings": [
        {
      "type": "product",
      "id": "review_product",
      "label": "Select Reviewed Product"
       },
        {
          "type": "text",
          "id": "reviewer_name",
          "label": "Reviewer Name",
            "default": "Ecomplaybook"
        },
                {
          "type": "text",
          "id": "reviews_heading",
          "label": "Reviews Heading",
          "default": "Worth it!"
        },
        {
          "type": "text",
          "id": "reviewer_initials",
          "label": "Reviewer initials"
        },
        {
          "type": "textarea",
          "id": "review_text",
          "label": "Review Text",
          "default": "I had been contemplating this for years..."
        },
        {
          "type": "range",
          "id": "ease_of_install",
          "label": "Ease of Install",
          "min": 0,
          "max": 100,
          "step": 20,
          "default": 80,
          "unit": "%"
        },
        {
          "type": "range",
          "id": "product_quality",
          "label": "Product Quality",
          "min": 0,
          "max": 100,
          "step": 20,
          "default": 80,
          "unit": "%"
        },
        {
          "type": "range",
          "id": "effects_on_hair",
          "label": "Effects on Hair",
          "min": 0,
          "max": 100,
          "step": 20,
          "default": 80,
          "unit": "%"
        },
        {
          "type": "range",
          "id": "effects_on_skin",
          "label": "Effects on Skin",
          "min": 0,
          "max": 100,
          "step": 20,
          "default": 80,
          "unit": "%"
        },

                {
          "type": "range",
          "id": "star_rating",
          "label": "Star Rating",
          "min": 1,
          "max": 5,
          "step": 1,
          "default": 5
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Ultimate Reviews",
      "category": "Custom"
    }
  ]
}
{% endschema %}



<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Review Section</title>
    <style>
        .review-container-v8 {
            background: white;
            border-radius: {{ section.settings.border_radius }}px;
            border: 1px solid {{ section.settings.border_color }};
            display: flex;
            max-width: 1200px;
            margin: auto;
          margin-top: 20px;
              
        }
      .review-content-v8{
        width: 100%;
        display: flex;
    flex-direction: column;
    padding: 12px;
      }
      .user-info-v8{
        display: flex;
    flex-direction: column;
    padding: 10px;
    border-right: 1px solid {{ section.settings.border_color }};
        width: 330px;
      }
        .rating-bar-v8 {
            width: 100%;
            background: {{ section.settings.scale_color }};
            height: 8px;
            position: relative;
            display: flex;
            align-items: center;
            border: 1px solid #2e2e2e;
            background: linear-gradient(to right, {{ section.settings.scale_color }} {{ block.settings.ease_of_install }}%, white 25%);
        }
        .rating-bar-v8 .notch {
            width: 1px;
            height: 8px;
            background: #2e2e2e;
            position: absolute;
        }
        .rating-bar-v8 .marker {
            width: 12px;
            height: 12px;
            background: #2e2e2e;
            position: absolute;
            top: -3px;
        }
      .reviewers-icon{
        width: 65px;
        height: 65px;
        background-color: {{ section.settings.profile_color }};
        color: white;
        display:flex;
        align-items:center;
        justify-content: center;
        text-align: center;
        border-radius: 50%;
        
      }
      .sliding-scale{
        max-width: 359px;
      }
      .review-container-v8 p {
    margin: 10px 0px;
    font-size: 11px;
}
      .reviews-house-containerv8{
        padding: 0px 15px;
      }
      @media (max-width: 786px) {
    .review-container-v8 {
        max-width: 100%;
        gap: 10px;
        margin-top: 10px;
    }
.review-container-v8 {
    background: white;
    display: flex;
    max-width: 1200px;
    margin: auto;
    margin-top: 20px;
    flex-direction: column;
}
              .sliding-scale{
        max-width: 100%;
      }
        .user-info-v8 {
    display: flex;
    flex-direction: column;
    padding: 10px;
    border-right: none;
          border-bottom: 1px solid {{ section.settings.border_color }};
          width: 100%;
}
}

    </style>
</head>
<div class="reviews-house-containerv8">
<h2 style = "text-align: center;">{{ section.settings.heading_text }} </h2>
  
    {% for block in section.blocks %}
        <div class="review-container-v8">
            <div class="user-info-v8">
              <div class = "name-tag-total-v8" style = "display: flex; flex-direction: row; gap: 10px; ">
                <div class = "reviewers-icon"> <p>{{ block.settings.reviewer_initials }}</p> </div>
              <div class = "name-tag-v8" style = "display:flex; flex-direction: column; justify-content: center; gap: 4px; ">  
              <h4 style = "margin: 0px; color: #2e2e2e; font-weight: 700; font-size: 18px;">{{ block.settings.reviewer_name }}</h4>
                <p class="verified-v8" style = "margin: 0px; font-size: 10px; display: flex; justify-content: flex-start; gap: 5px; align-items: center; color: #1dc187; font-weight: 700; "><svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" viewBox="0 0 169 158" width="12" height="12" fill="#1dc187">
  <switch>
    <g>
      <path d="M8.5 133.7V72.9c0-1.6.6-3.1 1.8-4.3 1.2-1.2 2.6-1.8 4.3-1.8H42c1.6 0 3.1.6 4.3 1.8 1.2 1.2 1.8 2.6 1.8 4.3v60.8c0 1.6-.6 3.1-1.8 4.3-1.2 1.2-2.6 1.8-4.3 1.8H14.6c-1.6 0-3.1-.6-4.3-1.8-1.2-1.2-1.8-2.6-1.8-4.3zm12.2-12.1c0 1.7.6 3.2 1.8 4.3 1.2 1.2 2.6 1.8 4.3 1.8 1.6 0 3.1-.6 4.3-1.8 1.2-1.2 1.8-2.6 1.8-4.3 0-1.6-.6-3.1-1.8-4.3-1.2-1.2-2.6-1.8-4.3-1.8-1.7 0-3.2.6-4.3 1.8-1.2 1.2-1.8 2.6-1.8 4.3zm33.4 12.1V72.8c0-1.6.6-3 1.7-4.1 1.1-1.2 2.5-1.8 4.1-1.9 1.5-.1 3.9-2 7.2-5.6 3.3-3.6 6.5-7.4 9.6-11.5 4.3-5.5 7.5-9.3 9.6-11.4 1.1-1.1 2.1-2.7 2.9-4.6.8-1.9 1.4-3.4 1.7-4.6.3-1.2.7-3.1 1.3-5.7.4-2.5.8-4.4 1.2-5.8.3-1.4 1-3 1.9-4.9.9-1.9 2-3.5 3.2-4.7 1.2-1.2 2.6-1.8 4.3-1.8 2.9 0 5.5.3 7.8 1s4.2 1.5 5.7 2.5 2.8 2.3 3.8 3.8c1 1.6 1.8 3 2.3 4.3.5 1.3.9 2.8 1.1 4.7.3 1.9.4 3.3.5 4.3v3.7c0 2.4-.3 4.8-.9 7.2-.6 2.4-1.2 4.3-1.8 5.7-.6 1.4-1.5 3.2-2.6 5.3-.2.4-.5.9-.9 1.7-.4.8-.8 1.5-1 2.1-.3.6-.5 1.4-.8 2.3h26.3c4.9 0 9.2 1.8 12.8 5.4s5.4 7.9 5.4 12.8c0 5.4-1.7 10.2-5.2 14.2.9 2.8 1.4 5.2 1.4 7.2.2 4.8-1.2 9.2-4.1 13 1.1 3.5 1.1 7.3 0 11.1-.9 3.6-2.7 6.6-5.1 8.9.6 7.1-1 12.8-4.7 17.2-4.1 4.8-10.3 7.3-18.7 7.4h-12.2c-4.2 0-8.7-.5-13.7-1.5-4.9-1-8.8-1.9-11.5-2.8-2.8-.9-6.6-2.1-11.4-3.8-7.8-2.7-12.8-4.1-15-4.2-1.6-.1-3.1-.7-4.3-1.9-1.3-1-1.9-2.4-1.9-4.1z"/>
    </g>
  </switch>
</svg>

 Verified Buyer</p>
              </div>
      </div>
      <div style = "display: flex; flex-direction: row; gap: 10px; margin-top: 12px;">
              
                 <img class="reviewed-image-v1" width="70px" height="70px"
     src="{% if block.settings.review_product.featured_image %}{{ block.settings.review_product.featured_image | img_url: 'large' }}{% else %}https://theinsidetrackinc.com/wp-content/uploads/2019/11/square-placeholder.jpg{% endif %}" 
     alt="{{ block.settings.review_product.title | escape }}">

       
        <div style = "display: flex; flex-direction: column;">
        <p style = "margin: 0px; font-size: 13px;"><strong>Reviewing</strong></p>
                 <p style="margin: 0px; font-size: 13px;">
  {% if block.settings.review_product.title %}
    {{ block.settings.review_product.title }}
  {% else %}
    Select a product
  {% endif %}
</p>


        </div>
        
      </div>
            </div>
            <div class="review-content-v8">
                <h3 style = "display:flex; margin: 0px; flex-direction: row; gap: 10px; align-items: center; font-size: 17px;">{{ block.settings.reviews_heading }}   <div class="star-rating" style = "font-size: 24px; letter-spacing: -3px;">
                    <div class="star-rating" style = "color: {{ section.settings.star_color }}; font-size: 20px;">
    {% for i in (1..block.settings.star_rating) %}
        ★
    {% endfor %}
</div>
                </div></h3>
               
                <p>{{ block.settings.review_text }}</p>
                <div class = "sliding-scale">
                  <div style = "display: flex; gap: 10px; align-items: center;">
                    <p style = "white-space: nowrap; width : 120px;">{{ section.settings.textv1 }}</p>
                    <div class="rating-bar-v8" style = " background: linear-gradient(to right, {{ section.settings.scale_color }} {{ block.settings.ease_of_install }}%, white {{ block.settings.ease_of_install }}%);">
                        <div class="notch" style="left: 20%;"> </div>
                        <div class="notch" style="left: 40%;"> </div>
                        <div class="notch" style="left: 60%;"> </div>
                        <div class="notch" style="left: 80%;"> </div>
                        <div class="marker" style="left: {{ block.settings.ease_of_install | minus: 2 }}%;"> </div>
                    </div>
                  </div>

                                    <div style = "display: flex; gap: 10px; align-items: center;">
                    <p style = "white-space: nowrap; width : 120px;">{{ section.settings.textv2 }}</p>
                    <div class="rating-bar-v8" style = " background: linear-gradient(to right, {{ section.settings.scale_color }} {{  block.settings.product_quality }}%, white {{  block.settings.product_quality }}%);">
                        <div class="notch" style="left: 20%;"> </div>
                        <div class="notch" style="left: 40%;"> </div>
                        <div class="notch" style="left: 60%;"> </div>
                        <div class="notch" style="left: 80%;"> </div>
                        <div class="marker" style="left: {{ block.settings.product_quality | minus: 2 }}%;"> </div>
                    </div>
                    </div>

                                      <div style = "display: flex; gap: 10px; align-items: center;">
                    <p style = "white-space: nowrap; width : 120px;">{{ section.settings.textv3 }}</p>
                    <div class="rating-bar-v8" style = " background: linear-gradient(to right, {{ section.settings.scale_color }} {{ block.settings.effects_on_hair }}%, white {{ block.settings.effects_on_hair }}%);">
                        <div class="notch" style="left: 20%;"> </div>
                        <div class="notch" style="left: 40%;"> </div>
                        <div class="notch" style="left: 60%;"> </div>
                        <div class="notch" style="left: 80%;"> </div>
                        <div class="marker" style="left: {{ block.settings.effects_on_hair | minus: 2 }}%;"> </div>
                    </div>
                      </div>

                                        <div style = "display: flex; gap: 10px; align-items: center;">
                    <p style = "white-space: nowrap; width : 120px;">{{ section.settings.textv4 }}</p>
                    <div class="rating-bar-v8" style = " background: linear-gradient(to right, {{ section.settings.scale_color }} {{ block.settings.effects_on_skin }}%, white {{ block.settings.effects_on_skin }}%);">
                        <div class="notch" style="left: 20%;"> </div>
                        <div class="notch" style="left: 40%;"> </div>
                        <div class="notch" style="left: 60%;"> </div>
                        <div class="notch" style="left: 80%;"> </div>
                        <div class="marker" style="left: {{ block.settings.effects_on_skin | minus: 2 }}%;"> </div>
                    </div>
                        </div>
                </div>
            </div>
        </div>
    {% endfor %}
        <button id="show-more-button" style = "
    margin: auto;
    margin-top: 20px;
    padding: 5px 20px;
          border: 1px solid {{ section.settings.border_color }};
          color: {{ section.settings.border_color }};
          background: #fff;
          border-radius: {{ section.settings.border_radius }}px;
">Show More</button>
</div>
</html>

<script>
  document.addEventListener("DOMContentLoaded", function() {
    let reviews = document.querySelectorAll(".review-container-v8"); // Selecting the correct review containers
    let showMoreButton = document.getElementById("show-more-button");
    let visibleReviews = 3; // Number of initially visible reviews
    
    function updateReviewsDisplay() {
      reviews.forEach((review, index) => {
        if (index < visibleReviews) {
          review.style.display = "flex"; // Make them visible
        } else {
          review.style.display = "none"; // Hide the rest
        }
      });

      // Hide the button if all reviews are shown
      if (visibleReviews >= reviews.length) {
        showMoreButton.style.display = "none";
      } else {
        showMoreButton.style.display = "block";
      }
    }
    
    showMoreButton.addEventListener("click", function() {
      visibleReviews += 3; // Show the next 3 reviews
      updateReviewsDisplay();
    });

    updateReviewsDisplay(); // Initial setup
  });
</script>



